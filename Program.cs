#region

using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using LeagueSharp;
using LeagueSharp.Common;

#endregion

namespace TrinketExploit
{
    internal static class Program
    {
        private static Menu _menu;

        private static void Main(string[] args)
        {
            Loading.OnLoadingComplete += Loading_OnLoadingComplete;
        }

        private static void Game_OnTick(EventArgs args)
        {
            if (Player.Instance.Level >= 9)
                return;

            const int totem = 3340;
            const int lens = 3341;
            const int farsight = 3363;
            const int oracle = 3364;

            if (_menu["buyfarsight"].Cast<KeyBind>().CurrentValue && !Player.Instance.HasItem(farsight))
            {
                if (!Player.Instance.HasItem(totem) && !Player.Instance.HasItem(lens) && !Player.Instance.HasItem(oracle))
                    Shop.BuyItem(totem);
                Shop.BuyItem(farsight);
            }

            if (_menu["buyoracle"].Cast<KeyBind>().CurrentValue && !Player.Instance.HasItem(oracle))
            {
                if (!Player.Instance.HasItem(totem) && !Player.Instance.HasItem(lens) && !Player.Instance.HasItem(oracle))
                    Shop.BuyItem(totem);
                Shop.BuyItem(oracle);
            }
        }

        private static void Loading_OnLoadingComplete(EventArgs args)
        {
            _menu = MainMenu.AddMenu("Trinket Exploit", "trinketexploit");

            _menu.AddGroupLabel("Buy Farsight Alteration");
            _menu.Add("buyfarsight", new KeyBind("Buy!", false, KeyBind.BindTypes.HoldActive, 'U'));
            _menu.AddSeparator();

            _menu.AddGroupLabel("Buy Oracle Alteration");
            _menu.Add("buyoracle", new KeyBind("Buy!", false, KeyBind.BindTypes.HoldActive, 'I'));
            _menu.AddSeparator();

            _menu.AddLabel("It goes back to the regular one after you used it!");
            Game.OnTick += Game_OnTick;
        }
    }
}
